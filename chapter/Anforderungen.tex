\chapter{\label{chap:anforderungen}Anforderungsdefinition}
Dieses Kapitel soll helfen eine Vorstellung für die Anforderungen an die Ampelhinweis -\gls{App} zu bekommen. Im heutigen High-Technologie Zeitalter spielt die Benutzbarkeit und Funktionalität des Produkts eine große Rolle. Es geht nicht nur darum, Interesse zu wecken, sondern auch die NutzerInnen für das Produkt zu begeistern. \\
Aus den oben genannten Szenarien werden im Folgenden die Anforderungen hergeleitet, die die zu entwickelnde \gls{Smartphone}-Anwendung erfüllen soll. Für die Umsetzung einer solchen Applikation ist die Positions- und Geschwindigkeitsbestimmung obligatorisch. Im Zusammenhang mit den Ampeldaten, bestehend aus Lage- und Schaltplan sollen die notwendigen Berechnungen durchgeführt und deren Ergebnisse als Empfehlung ausgesprochen.
% FUNKTIONALITÄT %
\section{Funktionalität}
Die Bestimmung der Position, Fahrtrichtung und Geschwindigkeit des Fahrrads ist die zentrale Voraussetzung für eine zeitgerechte Empfehlung. Sie sollte ebenso schnell wie präzise erfolgen, sodass keine Verzögerung der berechneten Ergebnisanzeige eintritt und die Informationen eine hohe Genauigkeit betragen.\\
Von ebenso hoher Relevanz sind die Ampeldaten bestehend aus der genauen Position der \gls{LSA} und deren Schaltpläne. Es muss ermittelt werden, welche Ampel die nächste ist und daraus die Entfernung zu dieser berechnen. Da nicht alle \gls{LSA} in Berlin automatisch geschaltet sind, sondern einige verkehrsabhängig gesteuert werden -- wie zum Beispiel FußgängerInnenampeln, die erst auf Druck aktiviert werden -- ist es nicht möglich für diese eine genaue Vorhersage zu treffen. Wird die nächstgelegene Ampel als solche identifiziert, muss die Anwendung sofort signalisieren, dass keine Empfehlung zu erwarten ist. Ebenso unbeachtet bleiben zunächst die Linksabbieger-Ampeln die auf die Hauptampel folgen. Da zuerst die Hauptampel passiert werden muss und die Linksabbieger-Ampel versetzt zu dieser geschaltet ist, ist beim Abbiegewunsch das Anhalten unvermeidbar.\\
Die meisten Fahrradampeln in Berlin sind entweder mit gar keiner oder einer sehr kurzen Gelbphase ausgeschaltet. Deshalb wird diese im zunächst nicht beachtet, bzw. als Grünphase behandelt.
% Berechnungen
\subsection{Berechnungen}
Abschnitt \ref{sec:mathGrundlagen} legt die Berechnungsgrundlagen hierfür dar. Die ausgesprochene Empfehlung basiert auf der berechneten Empfehlungsgeschwindigkeit, welche abhängig vom Abstand zu Ampel und der aktuellen Geschwindigkeit ist. Der Abstand zur Ampel wird durch die verbleibende Zeit, bis die Ampel umschaltet, dividert um die Progressionsgeschwindigkeit zu erhalten.\\\\
Die Berechnung bedarf sinnvoller Geschwindigkeitsparameter. Wenn man zu langsam fährt, ist es schwer den Lenker gerade zu halten oder man fällt irgendwann vom Rad. Demnach ist eine Untergrenze von 5km/h festzulegen. Die Obergrenze richtet sich in erster Linie nach der zulässigen Höchstgeschwindigkeit. Denn auch wenn Fahrräder nicht von den allgemeinen Geschwindigkeitsbegrenzungen der StVO nach \S 3 Abs. 3 der StVO betroffen sind, gelten per \S 3 Abs. 1 der StVO die per Schild angeordneten Geschwindigkeiten. Eine Höchstgeschwindigkeit von 30 km/h soll als Ausgangspunkt für die zu implementierende Anwendung dienen. Gegebenenfalls kann diese später individuell angepasst werden. Wird die berechnete Geschwindigkeit mit der aktuellen und den Begrenzungsparametern ins Verhältnis gesetzt, ist die Empfehlung abzuleiten. Die Prognose findet statt, sobald die Ampel circa 300 Meter voraus liegt. Bei einer größeren Entfernung von zum Beispiel einem Kilometer kann die Gefahr der Ablenkung bestehen. Sollte die Anwendung auf der Strecke durchgängig vorschlagen schneller zu fahren, könnte die fahrende Person dies als Ansporn sehen und so nicht mehr auf den Verkehr achten.\\ 
Bei dieser doch recht kurzen Entfernung genügt für den zu entwickelnden Prototyp der Abstand als Berechnungsbestandteil in Luftlinie. Bei Optimierungsbedarf bietet es sich hierfür an, Kartenmaterial einzubinden, um den genauen Abstand ermitteln zu können. Hierbei werden dann beeinflussende Elemente wie Hügel oder Kurven berücksichtigt.
% Datengrundlage
\subsection{Datengrundlagen}
Die Positionsdaten und Schaltpläne, \textit{im Uhrzeit- oder Datumsformat} befinden sich in einer \gls{XML}Datei, welche im internen Speicher abgelegt ist, wodurch sich Abfragen zu externen Servern, die eine Verbindung mit einem Netzwerk voraussetzen erübrigen. Diese sollte allein aus Performancegründen keinen Internetzugriff voraussetzen, da ein direkter Zugriff auf den internen Speicher nicht den Umweg über einen Server gehen muss. Ist das Datenvolumen aufgebraucht, ist die Netzwerkverbindung zu langsam die benötigsten Daten zeitnah anzufragen und zu erhalten.\\
Die von der Verkehrszentrale Berlin zur Verfügung gestellten Ampeldaten liegen als Pdf-Datei vor und müssen manuell eingesetzt und in ein sinnvolles Format gebracht werden. Es wurde entschieden die Ampeldaten in einer Datei händisch aufzubereiten. Da sowohl die Ampelpositionsdaten als auch die Ampelschaltpläne statisch sind, werden sie nur gelesen und nicht verändert, wofür bei der begrenzten Anzahl von Ampeln auf der Teststrecke keine Datenbank vonnöten ist. Weiter braucht eine Datei weder Treiber noch Bibliothek, was den Overhead\footnote{ Zusatzinformationen} gering hält. Zusätzlich wandelt der Android-Ressourcen-Compiler in ein komprimiertes Binärformat um (Vgl. \cite{androidXML} S. 49), was den Overhead minimiert. Bei einer ggf. späteren Einbindung des gesamten Stadtbildes ist über ein optimiertes Datenmodell nachzudenken. \\\\
Trotz des erhöhten Stromverbrauchs bei der Verwendung von \gls{GPS} ist es von Vorteil auf die netzwerkgestützte Standortbestimmung zu verzichten, da die Genauigkeit dieser Verfahren nicht so präzise ist. 
Eine Möglichkeit dem hohen Akkuverbrauch von \gls{GPS} entgegenzuwirken wäre die Verwendung eines externen \gls{GPS}-Geräts, das über Bluetooth mit dem \gls{Smartphone} verbunden ist und so dessen Akkulaufzeit verlängert. Außerdem ist die Qualität des \gls{GPS}-Empfängers höher als die des im \gls{Smartphone} verbauten und kann somit eine präziesere Ortung erlangen. (Vgl. \cite{gps} S. 28) Der Nachteil hierbei ist die Notwendigkeit eines zweiten Gerätes.
% DESIGN %
\section{Die graphische Oberfläche}
Ebenso wie die Bestimmung der Position und Geschwindigkeit spielt auch die graphische Darstellung eine große Rolle. Gerade bei dem Gebrauch im Verkehr ist die Eindeutigkeit und schnelle Erfassbarkeit der zu übermittelnden Informationen bedeutend. Um nicht von dem Verkehr abzulenken muss die Information, sowohl in Bedeutung als auch in Darstellung auf einen kurzen Blick erkennbar sein. Demnach sollte die Oberfläche möglichst einfach gehalten werden.\\
Da die Anwendung während der Fahrt nicht bedienbar sein muss -- denn auch das würde vom Verkehr ablenken -- besteht mehr Raum für die Informationsanzeige. 
Es ist davon auszugehen, dass die Anwendung ausschließlich im Freien Gebrauch findet. Dies und die dort herrschenden wechselnden Helligkeiten, zum Beispiel bei der Fahrt durch Schatten, setzen eine Verwendung von hohen Kontrasten voraus.
\subsection{Empfehlungen}
Im Allgemeinen sollte die Anwendung in der Lage sein die sich aus Kapitel \ref{chap:szenarien} resultierenden vier Systemzustände zu visualisieren und gegebenenfalls eine entsprechende Empfehlung auszusprechen.\\
Zur Verdeutlichung und einfacher Erfassbarkeit bietet es sich an, die entsprechenden Farben zu nehmen. Also ist für Zustand \textit{b}, der das Erreichen der Grünen Welle ohne Veränderung der eigenen Geschwindigkeit steht Grün und für den Zustand \textit{a}, der ausdrückt dass keine Weiterfahrt ohne an roter Ampel Anhalten zu müssen möglich ist, Rot zu verwenden.
Die Zustände \textit{c} und \textit{d} drücken aus, ein Erreichen der Grünen Welle ist möglich, jedoch nur bei Veränderung der eigenen Fahrgeschwindigkeit. Zur inhaltlichen Differenzierung ist eine andere Farbe zu wählen, sodass bereits aus dem Augenwinkel erkennbar ist "'Ich muss etwas tun"'. Dahingehend soll ersichtlich sein, wieviel getan werden muss. Sprich die Anwendung soll zwischen zwei Graden unterscheiden können: ob das Tempo leicht oder stark erhöht bzw. verlangsamt werden muss. Wird die Empfehlung der leichten Geschwindigkeitverlangsamung ausgesprochen, muss auch das ersichtlich sein.\\
Unterstützend zur Handlungsaufforderung kann ein Countdown angezeigt werden, der die Dauer der jeweiligen Ampelhase herunterzählt. 
